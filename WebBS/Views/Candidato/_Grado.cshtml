@model WebBS.Models.RRH_GradoAcademico
@{
    Layout = null;
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>

@*@using (Ajax.BeginForm("EditCustomer", "Home", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "edit-Dialog" }))*@

    <fieldset>
        <legend>Agregar Grado Académico</legend>
        @* <div style="color: Green; font-weight: bold">
                @ViewBag.Msg
            </div>*@
        @if (ViewBag.IsUpdate == true)
        {
            @Html.HiddenFor(model => model.Cod_GradoAcademico)
        }
        <div class="editor-label">
            @Html.LabelFor(model => model.Especialidad)
        </div>
        <div class="editor-field">

            @Html.EditorFor(model => model.Especialidad)
            @Html.ValidationMessageFor(model => model.Especialidad)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.CentroEstudios)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CentroEstudios)
            @Html.ValidationMessageFor(model => model.CentroEstudios)
        </div>
        <br />
        <div style="float: right">
            @if (ViewBag.IsUpdate == true)
            {

                <button type="submit" id="btnUpdate" name="Command" value="Update" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only">
                    <span class="ui-button-text">Update</span>
                </button>
            }
            else
            {
               
            <input id="add" type="button" value="Agregar" class="btn btn-default" />
            }
            &nbsp; &nbsp;
            <button type="button" id="btncancel" value="Cancelar" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only">
                <span class="ui-button-text">Cancelar</span>
            </button>
        </div>
    </fieldset>



@section Scripts{
    @Scripts.Render("~/bundles/jqueryval")
    <script>


        $(document).ready(function () {

            $("#btncancel").on("click", function (e) {
                // location.reload(true);
                $("#dialog-edit").dialog('close');

            });


            var orderItems = [];

        
            //Add button click function
          

            //Add button click function
            $('#add').click(function () {
                alert('hi');
                //Check validation of order item
                var isValidItem = true;




                //Add item to list if valid
                if (isValidItem) {
                    orderItems.push({
                        
                        Especialidad: parseInt($('#Especialidad').val()),
                        CentroEstudios: $('#CentroEstudios').val()
                    });


                    //Clear fields
                    $('#Especialidad').val('').focus();
                    $('#CentroEstudios,#Valor').val('');

                }
                //populate order items
                GeneratedItemsTable();

            });

             


                $("#DNI").keypress(function (e) {
                    //if the letter is not digit then display error and don't type anything
                    if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
                        //display error message
                        $("#errmsg").html("Digits Only").show().fadeOut("slow");
                        return false;
                    }
                });


                $("#CreateCustomer").on("click", function (e) {
                    // e.preventDefault(); use this or return false
                    var url = $(this).attr('href');
                    $("#dialog-edit").dialog({
                        title: 'Grado Académico',
                        autoOpen: false,
                        resizable: false,
                        height: 300,
                        width: 600,
                        show: { effect: 'drop', direction: "up" },
                        modal: true,
                        draggable: true,
                        open: function (event, ui) {
                            $(this).load(url);

                        },
                        close: function (event, ui) {
                            $(this).dialog('close');
                        }
                    });

                    $("#dialog-edit").dialog('open');
                    return false;
                });



                function GeneratedItemsTable() {
                    if (orderItems.length > 0) {
                        var $table = $('<table class="table table-striped table-bordered table-hover"/>');
                        $table.append('<thead><tr><th hidden="hidden"></th><th>Especialidad</th><th>Centro de Estudios</th><th>Fecha</th><th>Agregar</th></tr></thead>');
                        var $tbody = $('<tbody/>');
                        $.each(orderItems, function (i, val) {
                            var $row = $('<tr/>');
                        
                            $row.append($('<td/>').html(val.Especialidad));
                            $row.append($('<td/>').html(val.CentroEstudios));
                            $row.append($(' <td class="text-right"><a id="CreateCustomer" href="..\Candidato\AdicionarGrado" title=""><i class="glyphicon glyphicon-plus"></i></a></td>').html(val.Valor));
                     


                            $tbody.append($row);
                        });
                        $table.append($tbody);
                        $('#orderItems').html($table);
                    }
                }

            });

    </script>
    
    }